import{a as b,u as D,r as o,j as e,L as j}from"./index-C5zx14qq.js";import{A as N}from"./index-AWZbXYyJ.js";import{u as v,a as C,H as L}from"./Helmet-Be2S_ECT.js";import"./iconBase--OrQMHt-.js";function F(){const{symbol:r}=b(),f=D(),{t}=v(),[i,d]=o.useState([]),[y,x]=o.useState(!0),[g,l]=o.useState(null),c=o.useMemo(()=>i.filter(s=>s.symbol.toLowerCase()===r.toLowerCase()),[i,r]),h=o.useCallback((s,n)=>{try{localStorage.setItem(s,JSON.stringify(n))}catch(a){if(a.name==="QuotaExceededError")console.warn("Quota exceeded, clearing old data..."),localStorage.clear(),localStorage.setItem(s,JSON.stringify(n));else throw a}},[]),m=o.useCallback(async()=>{var s,n;try{x(!0),l(null);const a=localStorage.getItem(`candlesData-${r}`);if(a)d(JSON.parse(a));else{const u=await C.get("/candle.json");if((n=(s=u.data)==null?void 0:s.hits)!=null&&n.hits){const p=u.data.hits.hits.map(S=>S._source)||[];d(p),h(`candlesData-${r}`,p)}else l(t("noCandleData"))}}catch(a){console.error("Error fetching candle data:",a),a.response?l(`${t("errorFetchingData")}: ${a.response.statusText}`):a.request?l(t("networkError")):l(t("unexpectedError"))}finally{x(!1)}},[r,t,h]);if(o.useEffect(()=>{m()},[r,m]),y)return e.jsx(j,{});if(g)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("p",{className:"text-center text-red-500",children:g})});const w=c.length>0?`${t("candleDataFor")} ${r}: ${t("viewCandleDataDesc")}`:t("loadingDetails");return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs(L,{children:[e.jsxs("title",{children:[t("candleDataFor")," ",r]}),e.jsx("meta",{name:"description",content:w})]}),e.jsxs("button",{onClick:()=>{f(-1),window.scrollTo(0,0)},className:"mb-6 flex items-center bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition duration-200",alt:"back",children:[e.jsx(N,{className:"mr-2"}),t("back")]}),e.jsxs("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6",children:[t("candleDataFor")," ",r]}),c.length>0?e.jsx(o.Suspense,{fallback:e.jsx(j,{}),children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((s,n)=>e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-200",children:[e.jsxs("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:[e.jsxs("strong",{children:[t("date"),":"]})," ",new Date(s.dateTime).toLocaleString()]}),e.jsxs("div",{className:"mt-2 space-y-1 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[t("open"),":"]})," ",s.startPrice.toLocaleString()]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[t("high"),":"]})," ",s.highestPrice.toLocaleString()]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[t("low"),":"]})," ",s.lowestPrice.toLocaleString()]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[t("close"),":"]})," ",s.endPrice.toLocaleString()]}),e.jsxs("p",{children:[e.jsxs("strong",{children:[t("volume"),":"]})," ",s.volume.toLocaleString()]})]})]},n))})}):e.jsx("p",{className:"text-gray-500 text-center",children:t("noCandleData")})]})}export{F as default};
