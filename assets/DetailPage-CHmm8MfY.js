const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C5zx14qq.js","assets/index-B0LD49Z1.css"])))=>i.map(i=>d[i]);
import{a as N,u as v,r,j as e,_ as k}from"./index-C5zx14qq.js";import{A as $}from"./index-AWZbXYyJ.js";import{G as w}from"./iconBase--OrQMHt-.js";import{u as D,a as E,H as S}from"./Helmet-Be2S_ECT.js";function _(s){return w({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M0 0h1v15h15v1H0zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07"},child:[]}]})(s)}const A=r.lazy(()=>k(()=>import("./index-C5zx14qq.js").then(s=>s.f),__vite__mapDeps([0,1])));function O(){const{symbol:s}=N(),n=v(),{t}=D(),[a,c]=r.useState(null),[h,d]=r.useState(!0),[m,i]=r.useState(null),x=r.useCallback(async()=>{var u;try{d(!0),i(null);const l=localStorage.getItem(`detail-${s}`),f=localStorage.getItem(`detailTimestamp-${s}`),g=Date.now();if(l&&g-f<36e5)c(JSON.parse(l));else{const{data:j}=await E.get("/metadata.json"),o=(u=j.hits.hits.find(b=>b._source.symbol===s))==null?void 0:u._source;o?(localStorage.setItem(`detail-${s}`,JSON.stringify(o)),localStorage.setItem(`detailTimestamp-${s}`,g),c(o)):i(t("detailsNotFound"))}}catch(l){console.error("Error fetching metadata:",l),i(l.response?`${t("errorFetchingData")}: ${l.response.statusText}`:l.request?t("networkError"):t("unexpectedError"))}finally{d(!1)}},[s,t]);r.useEffect(()=>{x()},[x]);const p=r.useMemo(()=>a?e.jsxs("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg space-y-6",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:a.name}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsxs("strong",{className:"font-semibold",children:[t("symbol"),":"]})," ",a.symbol]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsxs("strong",{className:"font-semibold",children:[t("type"),":"]})," ",a.type]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsxs("strong",{className:"font-semibold",children:[t("country"),":"]})," ",a.countryName]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsxs("strong",{className:"font-semibold",children:[t("currency"),":"]})," ",a.currency]}),e.jsxs("p",{className:"text-gray-700 dark:text-gray-300",children:[e.jsxs("strong",{className:"font-semibold",children:[t("description"),":"]})," ",a.description||t("notAvailable")]})]}),e.jsxs("button",{onClick:()=>n(`/candles/${s}`),className:"mt-6 flex items-center bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-700 shadow-lg transition duration-200",alt:"view candle",children:[e.jsx(_,{className:"mr-2"}),t("viewCandle")]})]}):null,[a,n,s,t]),y=a?`${a.name} (${a.symbol}) - A detailed view of the ${a.type} from ${a.countryName}, available in ${a.currency}.`:t("loadingDetails");return h?e.jsx(r.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(A,{})}):e.jsxs("div",{className:"container mx-auto px-4 py-8 sm:px-6 lg:px-8",children:[e.jsxs(S,{children:[e.jsx("title",{children:a?`${a.name} - ${t("details")}`:t("loadingDetails")}),e.jsx("meta",{name:"description",content:y})]}),e.jsxs("button",{onClick:()=>n(-1),className:"mb-6 flex items-center bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition duration-200",alt:"back",children:[e.jsx($,{className:"mr-2"}),t("back")]}),m?e.jsx("div",{className:"text-center text-red-500",children:e.jsx("p",{children:m})}):a?p:e.jsx("div",{className:"text-center text-gray-500",children:e.jsx("p",{children:t("detailsNotAvailable")})})]})}export{O as default};
